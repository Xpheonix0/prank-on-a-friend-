<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Floppy Soumik</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:system-ui; }

    body {
      min-height:100vh;
      display:flex; justify-content:center; align-items:center;
      background:radial-gradient(circle at top, #02161a 0%, #02040a 60%, #000 100%);
      color:#e5fffb;
      padding:12px;
    }

    .wrapper { text-align:center; max-width:480px; width:100%; }

    h1 {
      font-size:1.7rem;
      margin-bottom:4px;
      text-transform:uppercase;
      letter-spacing:0.12em;
      color:#a5fff5;
      text-shadow:0 0 8px #00ffc8aa, 0 0 18px #00ffaa66;
    }

    .subtitle { font-size:0.75rem; opacity:0.8; color:#7fffd4; margin-bottom:10px; }

    .game-shell {
      padding:10px;
      border-radius:24px;
      background:radial-gradient(circle at top, #04241c 0%, #01060a 70%);
      border:1px solid #00ff8055;
      box-shadow:0 0 35px #00ffb330, 0 18px 40px #000;
      position:relative;
      display:inline-block;
    }

    canvas {
      border-radius:18px;
      background:#00ff33;
      max-width:min(420px,100vw-40px);
    }

    .hint { margin-top:10px; opacity:0.85; }
    .hint span {
      padding:4px 10px; border-radius:999px;
      border:1px solid #00ff8055;
      font-size:0.7rem;
      text-transform:uppercase;
      color:#b0fff4;
      letter-spacing:0.1em;
    }

    .credit {
      margin-top:8px; opacity:0.6; font-size:0.7rem;
      text-transform:uppercase; color:#8ffff3;
    }

    .death-modal {
      position:absolute;
      inset:10px;
      display:flex;
      justify-content:center;
      align-items:center;
      opacity:0;
      pointer-events:none;
      transition:0.2s ease-out;
    }

    .death-modal.show { opacity:1; pointer-events:all; }

    .death-backdrop {
      position:absolute; inset:0;
      border-radius:18px;
      background:radial-gradient(circle, #000000d0, #000000f0);
      backdrop-filter:blur(4px);
    }

    .death-card {
      position:relative;
      padding:18px;
      text-align:center;
      border-radius:18px;
      border:1px solid #00ff8090;
      background:radial-gradient(circle at top, #051619, #05060c);
      box-shadow:0 0 18px #00ffb380, 0 0 32px #ff008055;
      color:#eafff7;
      max-width:90%;
    }

    #retryBtn {
      border:none;
      margin-top:8px;
      padding:8px 18px;
      font-size:0.85rem;
      border-radius:999px;
      background:linear-gradient(90deg,#00ffb3,#00e0ff);
      color:#021012;
      cursor:pointer;
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <h1>FLOPPY SOUMIK</h1>
    <div class="subtitle">neon cursed edition</div>

    <div class="game-shell">
      <canvas id="game" width="360" height="520"></canvas>

      <div id="deathModal" class="death-modal">
        <div class="death-backdrop"></div>
        <div class="death-card">
          <h2>Game Over</h2>
          <p class="widow">soumik is killed by you,<br>you made someone a widow</p>
          <p class="score-line">Score: <span id="finalScore">0</span> Â· Best: <span id="bestScore">0</span></p>
          <button id="retryBtn">Play Again</button>
        </div>
      </div>
    </div>

    <div class="hint"><span>Tap / Click / Space to flap</span></div>

    <div class="credit">
      code written & published by <b>Tech_.eros</b> with help of <b>pacops777</b>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const deathModal = document.getElementById("deathModal");
    const finalScoreEl = document.getElementById("finalScore");
    const bestScoreEl = document.getElementById("bestScore");
    const retryBtn = document.getElementById("retryBtn");

    const birdImg = new Image();
    birdImg.src = "friend.png";

    const deathSound = new Audio("death.mp3");
    deathSound.volume = 0.6;

    // Easy-mode base values
    let GRAVITY = 0.20;
    let JUMP = -6.2;     // ðŸ”¥ Reduced jump (was -8.5)
    let PIPE_GAP = 230;
    let PIPE_SPEED = 1.2;

    const PIPE_WIDTH = 70;
    const BIRD_X = 80;

    // Hitbox sizes
    const HITBOX_EASY = 8;      // ðŸ”¥ tiny hitbox for score <3
    const HITBOX_NORMAL = 14;   // normal hitbox after score 3
    const PRANK_EXTRA_RADIUS = 10;

    let birdY = canvas.height / 2;
    let birdVel = 0;
    let pipes = [];
    let frameCount = 0;
    let score = 0;
    let bestScore = 0;
    let started = false;
    let gameOver = false;
    let prankActive = false;

    function resetState() {
      birdY = canvas.height / 2;
      birdVel = 0;
      pipes = [];
      frameCount = 0;
      score = 0;
      prankActive = false;

      GRAVITY = 0.20;
      JUMP = -6.2;
      PIPE_GAP = 230;
      PIPE_SPEED = 1.2;

      gameOver = false;
    }


    function scaleDifficulty() {
      if (score <= 3) return;

      const s = score - 3;

      PIPE_GAP = Math.max(60, 230 - (s * 30));
      PIPE_SPEED = 1.2 * Math.pow(1.5, s);
      GRAVITY = 0.20 + (s * 0.2);
    }


    function spawnPipe() {
      const minGapY = 60;
      const maxGapY = canvas.height - 60 - PIPE_GAP;
      const gapY = Math.random() * (maxGapY - minGapY) + minGapY;

      pipes.push({ x: canvas.width, gapY, counted: false });
    }


    function update() {
      if (!started || gameOver) return;

      frameCount++;
      birdVel += GRAVITY;
      birdY += birdVel;

      if (frameCount % 95 === 0) spawnPipe();

      pipes.forEach(p => p.x -= PIPE_SPEED);
      pipes = pipes.filter(p => p.x + PIPE_WIDTH > 0);

      if (score >= 3) prankActive = true;

      let hitbox = (score < 3) ? HITBOX_EASY : HITBOX_NORMAL;
      if (prankActive) hitbox += PRANK_EXTRA_RADIUS;


      for (let p of pipes) {
        const collideX =
          BIRD_X + hitbox > p.x &&
          BIRD_X - hitbox < p.x + PIPE_WIDTH;

        const hitTop = birdY - hitbox < p.gapY;
        const hitBottom = birdY + hitbox > p.gapY + PIPE_GAP;

        if (collideX && (hitTop || hitBottom)) triggerGameOver();

        if (!p.counted && p.x + PIPE_WIDTH < BIRD_X - hitbox) {
          p.counted = true;
          score++;
          scaleDifficulty();
        }
      }

      if (birdY + hitbox > canvas.height || birdY - hitbox < 0) {
        triggerGameOver();
      }
    }


    function triggerGameOver() {
      if (gameOver) return;
      gameOver = true;

      bestScore = Math.max(bestScore, score);
      finalScoreEl.textContent = score;
      bestScoreEl.textContent = bestScore;

      deathSound.pause();
      deathSound.currentTime = 0;
      deathSound.play();

      deathModal.classList.add("show");
    }


    function drawBackground() {
      ctx.fillStyle = "#00cc2a";
      ctx.fillRect(0, canvas.height - 80, canvas.width, 80);
      ctx.fillStyle = "#00991f";
      ctx.fillRect(0, canvas.height - 80, canvas.width, 12);
    }

    function drawBird() {
      ctx.save();
      ctx.translate(BIRD_X, birdY);
      ctx.rotate(birdVel * 0.06);

      if (birdImg.complete) {
        ctx.drawImage(birdImg, -35, -35, 70, 70);
      } else {
        ctx.fillStyle = "#fff";
        ctx.beginPath();
        ctx.arc(0, 0, 12, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.restore();
    }


    function drawPipes() {
      for (let p of pipes) {
        const gradT = ctx.createLinearGradient(p.x, 0, p.x + PIPE_WIDTH, 0);
        gradT.addColorStop(0, "#00ffb3");
        gradT.addColorStop(1, "#00e0ff");

        const gradB = ctx.createLinearGradient(p.x, 0, p.x + PIPE_WIDTH, 0);
        gradB.addColorStop(0, "#ff6bd5");
        gradB.addColorStop(1, "#ffa94d");

        ctx.fillStyle = gradT;
        ctx.fillRect(p.x, 0, PIPE_WIDTH, p.gapY);

        ctx.fillStyle = gradB;
        ctx.fillRect(p.x, p.gapY + PIPE_GAP, PIPE_WIDTH, canvas.height - (p.gapY + PIPE_GAP));
      }
    }


    function drawText() {
      ctx.fillStyle = "#00000070";
      ctx.fillRect(0, 0, canvas.width, 40);

      ctx.font = "18px system-ui";
      ctx.fillStyle = "#eafff7";
      ctx.textAlign = "left";
      ctx.fillText("Score: " + score, 10, 26);

      ctx.textAlign = "right";
      ctx.fillText("Best: " + bestScore, canvas.width - 10, 26);

      if (!started && !gameOver) {
        ctx.fillStyle = "#00000080";
        ctx.fillRect(40, canvas.height / 2 - 70, canvas.width - 80, 120);

        ctx.fillStyle = "#eafff7";
        ctx.textAlign = "center";
        ctx.font = "20px system-ui";
        ctx.fillText("Tap / Click / Space", canvas.width / 2, canvas.height / 2 - 20);

        ctx.font = "13px system-ui";
        ctx.fillText("First 3 points are SUPER EASY", canvas.width / 2, canvas.height / 2 + 12);
      }
    }


    function loop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBackground();
      update();
      drawPipes();
      drawBird();
      drawText();
      requestAnimationFrame(loop);
    }


    function flap() {
      if (!started) {
        started = true;
        deathModal.classList.remove("show");
        resetState();
        birdVel = JUMP;
        return;
      }

      if (gameOver) {
        deathModal.classList.remove("show");
        resetState();
        started = true;
        birdVel = JUMP;
        return;
      }

      birdVel = JUMP;
    }


    window.addEventListener("keydown", e => {
      if (e.code === "Space") {
        e.preventDefault();
        flap();
      }
    });

    canvas.addEventListener("mousedown", flap);
    canvas.addEventListener("touchstart", e => {
      e.preventDefault();
      flap();
    }, { passive: false });

    retryBtn.addEventListener("click", flap);

    resetState();
    loop();
  </script>
</body>
</html>
